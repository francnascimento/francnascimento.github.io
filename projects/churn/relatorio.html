<!doctype html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Análise de Evasão de Clientes | Tenbu</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- favicon
		============================================ -->
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <!-- Google Fonts
		============================================ -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <!-- owl.carousel CSS
		============================================ -->
    <link rel="stylesheet" href="css/owl.carousel.css">
    <link rel="stylesheet" href="css/owl.theme.css">
    <link rel="stylesheet" href="css/owl.transitions.css">
    <!-- meanmenu CSS
		============================================ -->
    <link rel="stylesheet" href="css/meanmenu/meanmenu.min.css">
    <!-- animate CSS
		============================================ -->
    <link rel="stylesheet" href="css/animate.css">
    <!-- normalize CSS
		============================================ -->
    <link rel="stylesheet" href="css/normalize.css">
    <!-- mCustomScrollbar CSS
		============================================ -->
    <link rel="stylesheet" href="css/scrollbar/jquery.mCustomScrollbar.min.css">
    <!-- jvectormap CSS
		============================================ -->
    <link rel="stylesheet" href="css/jvectormap/jquery-jvectormap-2.0.3.css">
    <!-- bootstrap select CSS
		============================================ -->
    <link rel="stylesheet" href="css/bootstrap-select/bootstrap-select.css">
    <!-- notika icon CSS
		============================================ -->
    <link rel="stylesheet" href="css/notika-custom-icon.css">
    <!-- wave CSS
		============================================ -->
    <link rel="stylesheet" href="css/wave/waves.min.css">
    <!-- Data Table JS
		============================================ -->
    <link rel="stylesheet" href="css/jquery.dataTables.min.css">
    <!-- main CSS
		============================================ -->
    <link rel="stylesheet" href="css/main.css">
    <!-- style CSS
		============================================ -->
    <link rel="stylesheet" href="style.css">
    <!-- responsive CSS
		============================================ -->
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/bootstrap-select/bootstrap-select.css">
    <!-- modernizr JS
		============================================ -->
    <script src="js/vendor/modernizr-2.8.3.min.js"></script>
</head>

<body>
    <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <!-- Start Header Top Area -->
    <div class="loader_wrapper">
        <div id="loader"></div>
    </div>
    <div class="header-top-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                    <div style="margin-top: 20px;">
                        <h3>Análise de Evasão de Cliente</h3>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12"></div>
                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                    <div class="logo-area"  style="float: right;">
                        <a href="https://tenbu.com.br"><img src="img/logo/logo.png" alt="" /></a>
                    </div>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
                    <div class="header-top-menu">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Header Top Area -->
    <!-- Mobile Menu start -->
    <div class="mobile-menu-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                </div>
            </div>
        </div>
    </div>
    <!-- Mobile Menu end -->
    <!-- Main Menu area start-->
    <div class="main-menu-area mg-tb-40">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <ul class="nav nav-tabs notika-menu-wrap menu-it-icon-pro">
                        <li><a href="index.html"><i class="notika-icon notika-house"></i> Home</a>
                        </li>
                        <li class="active"><a href="relatorio.html"><i class="notika-icon notika-form"></i> Relatório</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- Main Menu area End-->
    <div class="row">
        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
            
        </div>
    </div>
    <!-- Start Email Statistic area-->
    
    <div class="data-table-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button class="btn btn-primary notika-btn-primary botazinho">Gerar Relatório</button>
                    <div class="data-table-list">
                        <div class="basic-tb-hd">
                            <h2>Resultados</h2>
                            <p>Probabilidades de evasão para o próximo mês.</p>
                        </div>
                        <div class="table-responsive">
                            <table id="data-table-basic" class="table table-hover table-striped table-condensed tabelaResultado">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>ID do Cliente</th>
                                        <th>Probabilidade Churn</th>
                                        <th>Estratégia Principal</th>
                                        <th>Estratégia Comercial</th>
                                        <th>Estratégia Financeira</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--
                    <div class="normal-table-list mg-t-30">
                        <div class="basic-tb-hd">
                            <h2>Resultados</h2>
                            <p>Probabilidades de evasão para o próximo mês</p>
                        </div>
                        <div class="bsc-tbl-hvr">
                            <table class="table table-hover table-condensed tabelaResultado">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>ID do Cliente</th>
                                        <th>Probabilidade Churn</th>
                                        <th>Estratégia Principal</th>
                                        <th>Estratégia Comercial</th>
                                        <th>Estratégia Financeira</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    -->
                </div>
            </div>
        </div>
    </div>
    <!-- End Email Statistic area-->
    <!-- Start Realtime sts area-->
    <!-- End Realtime sts area-->
    <!-- Start Footer area-->
    <div class="footer-copyright-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="footer-copy-right">
                        <p>Copyright © 2018. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Footer area-->
    <!-- jquery============================================ -->
    <script src="js/vendor/jquery-1.12.4.min.js"></script>
    <script src="js/algorithmia/algorithmia-0.2.0.js" type="text/javascript"></script>

    <script type="text/javascript">
    function showloader(){
	    $(".loader_wrapper").fadeIn(1000);
	}

	function hideloader(){
	    $(".loader_wrapper").fadeOut(1000);
	}
    $('.table-sc-ex td').css({ "padding": '5px 10px 5px 10px' });

    var dictionary = {
        "1578498":[2, 42, 1, 6, 23, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 4496.41],
        "2130039":[1, 34, 1, 11, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1409.46],
        "3585491":[5, 71, 0, 7, 50, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 941.03],
        "3717786":[1, 50, 0, 12, 9, 0, 1, 0, 0, 1, 0, 1, 1, 1, 3, 1, 0, 0, 0, 0, 0, 6390.77],
        "5865943":[1, 26, 0, 9, 9, 0, 1, 0, 0, 1, 0, 2, 2, 2, 3, 1, 0, 0, 1, 0, 0, 187.21],
        "6250244":[4, 55, 0, 8, 47, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1319.06],
        "8919141":[5, 31, 0, 7, 55, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 839.59],
        "11257388":[1, 50, 1, 8, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 6448.18],
        "11432185":[2, 53, 1, 6, 23, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1461.71],
        "14451795":[5, 35, 1, 1, 59, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 408.30],
        "4868542":[1, 44, 1, 4, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1174.16],
        "14435296":[1, 41, 1, 2, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 8348.54],
        "9068739":[1, 52, 1, 4, 11, 1, 1, 0, 0, 1, 0, 1, 1, 1, 2, 1, 0, 0, 0, 0, 0, 10626.46],
        "1175416":[1, 29, 0, 9, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 650.00],
        "14148397":[1, 62, 1, 1, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 330.00],
        "3655908":[2, 37, 1, 7, 23, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1480.78],
        "3853491":[1, 37, 1, 1, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 2403.63],
        "577140":[2, 29, 0, 7, 23, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 929.90],
        "13944036":[2, 44, 1, 7, 23, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1530.32],
        "4593184":[2, 43, 1, 4, 23, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 3080.09],
        "8309235":[1, 32, 0, 8, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 753.98],
        "5279348":[1, 26, 1, 2, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 2, 1, 0, 0, 0, 0, 0, 502.79],
        "3789326":[1, 29, 1, 3, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 2, 1, 0, 0, 0, 0, 0, 2808.31],
        "512011":[2, 43, 0, 3, 23, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 2917.38],
        "3082565":[1, 64, 0, 5, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 300.00],
        "7324299":[2, 37, 1, 6, 23, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 5585.20],
        "9677321":[1, 50, 1, 0, 11, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1375.28],
        "7445865":[1, 37, 1, 1, 11, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 2687.56]
    };

    var data = {
        "customers":
        dictionary
    }
    
    $(".botazinho").click(function(){
        var t = $('#data-table-basic').DataTable()

        showloader()

        Algorithmia.client("sim3HNtXdw2XjHcH4o0YnCPzykj1")
        .algo("francnascimento/churn/0.1.2")
        .pipe(data)
        .then(function(output) {
            var obj = JSON.parse(output.result.body);
            var newRowContent = ""
            var newRowContentArray = []            
            var indexRow = 1
            var prob = 0
            for (var customerID in obj) {

                // Definicao de variaveis
                prob = Math.floor( (obj[customerID]*100) )
                var main_response = "Reter até final do Contrato"
                var comm_response = "Retenção e Manutenção"

                if(prob >= 75){
                    comm_response = "Propor Reajuste de Contrato"
                } else if(prob >= 50){
                    comm_response = "Oferecer Serviços Adicionais"
                } else if (prob >= 25){
                    main_response = "Agregar novo Produto ao Contrato"
                }

                // Construcao da resposta
                t.row.add([indexRow, customerID, prob+"%", main_response, comm_response, "Retenção e Manutenção"]).draw( false );
                indexRow++
            }
            hideloader()
        });
    })
    </script>

    
    <!-- bootstrap JS ============================================ -->
    <script src="js/bootstrap.min.js"></script>
    <!-- wow JS ============================================ -->
    <script src="js/wow.min.js"></script>
    <!-- price-slider JS ============================================ -->
    <script src="js/jquery-price-slider.js"></script>
    <!-- owl.carousel JS ============================================ -->
    <script src="js/owl.carousel.min.js"></script>
    <!-- scrollUp JS ============================================ -->
    <script src="js/jquery.scrollUp.min.js"></script>
    <!-- meanmenu JS ============================================ -->
    <script src="js/meanmenu/jquery.meanmenu.js"></script>
    <!-- counterup JS ============================================ -->
    <script src="js/counterup/jquery.counterup.min.js"></script>
    <script src="js/counterup/waypoints.min.js"></script>
    <script src="js/counterup/counterup-active.js"></script>
    <!-- mCustomScrollbar JS ============================================ -->
    <script src="js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
    <!-- jvectormap JS
		
    <script src="js/jvectormap/jquery-jvectormap-2.0.2.min.js"></script>
    <script src="js/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="js/jvectormap/jvectormap-active.js"></script>
    ============================================ -->
    <!-- sparkline JS ============================================ -->
    <script src="js/sparkline/jquery.sparkline.min.js"></script>
    <script src="js/sparkline/sparkline-active.js"></script>
    <!-- sparkline JS ============================================ -->
    <script src="js/flot/jquery.flot.js"></script>
    <script src="js/flot/jquery.flot.resize.js"></script>
    <script src="js/flot/curvedLines.js"></script>
    <script src="js/flot/flot-active.js"></script>
    <!-- bootstrap select JS ============================================ -->
    <script src="js/bootstrap-select/bootstrap-select.js"></script>
    <!-- knob JS ============================================ -->
    <script src="js/knob/jquery.knob.js"></script>
    <script src="js/knob/jquery.appear.js"></script>
    <script src="js/knob/knob-active.js"></script>
    <!--  wave JS ============================================ -->
    <script src="js/wave/waves.min.js"></script>
    <script src="js/wave/wave-active.js"></script>
    <!--  todo JS ============================================ -->
    <script src="js/todo/jquery.todo.js"></script>
    <!-- plugins JS ============================================ -->
    <script src="js/plugins.js"></script>
    <!-- Data Table JS ============================================ -->
    <script src="js/data-table/jquery.dataTables.min.js"></script>
    <script src="js/data-table/data-table-act.js"></script>
	<!--  Chat JS ============================================ -->
    <script src="js/chat/moment.min.js"></script>
    <script src="js/chat/jquery.chat.js"></script>
    <!-- main JS ============================================ -->
    <script src="js/main.js"></script>
    
</body>

</html>